{% extends 'base.html' %}

{% block title %}{{ username }}ë‹˜ì˜ í”„ë¡œí•„{% endblock %}

{% block content %}
    
    <h1>
        ğŸ‘¤ {{ username }}ë‹˜ 
        <span class="badge bg-danger align-middle fs-5">{{ title_badge }}</span>
    </h1>
    <hr>
    
    <div class="card mb-3">
        <div class="card-header bg-success text-white">ğŸ’° ë‚´ ì¬í™” ì •ë³´</div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
                <strong>ë³´ìœ  í¬ì¸íŠ¸:</strong> <span class="badge bg-primary fs-5">{{ points }} P</span>
            </li>
            <li class="list-group-item">
                <strong>ì™„ë£Œí•œ ì‹¬ë¶€ë¦„ ìˆ˜:</strong> <span class="badge bg-secondary fs-5">{{ tasks_completed }} ê±´</span>
            </li>
        </ul>
    </div>
    
    <div class="card mb-3">
        <div class="card-header bg-warning text-dark">âœ¨ í™œë™ í†µê³„</div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
                <strong>í‰ê·  ë³„ì :</strong> 
                <span class="badge bg-dark fs-5">
                    {% if average_rating > 0.0 %}
                        {{ average_rating }} / 5.0
                    {% else %}
                        (ì•„ì§ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤)
                    {% endif %}
                </span>
            </li>
        </ul>
    </div>
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white h4">ğŸ‘‘ ì¹­í˜¸ ì„ íƒ</div>
        <div class="card-body">
            <p>í˜„ì¬ê¹Œì§€ ì™„ë£Œí•œ ì‹¬ë¶€ë¦„ ìˆ˜({{ tasks_completed }}ê±´)ì— ë”°ë¼ íšë“ ê°€ëŠ¥í•œ ì¹­í˜¸ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <form method="post">
                {% csrf_token %}
                <div class="row align-items-end">
                    <div class="col-9">
                        {{ title_form.selected_title.label_tag }}
                        {{ title_form.selected_title }}
                    </div>
                    <div class="col-3">
                        <button type="submit" class="btn btn-warning w-100">ì¹­í˜¸ ë³€ê²½</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    
    <h2 class="mt-5">ğŸ“ ë°›ì€ ë¦¬ë·° ëª©ë¡</h2>
    {% if received_reviews %}
        <div class="list-group">
            {% for review in received_reviews %}
                <div class="list-group-item list-group-item-action flex-column align-items-start">
                    <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1 text-warning">
                            {% for i in "12345" %}
                                {% if forloop.counter <= review.rating %}â­{% else %}â˜†{% endif %}
                            {% endfor %}
                        </h5>
                        <small class="text-muted">{{ review.created_at|date:"Y-m-d" }}</small>
                    </div>
                    <p class="mb-1">{{ review.comment }}</p>
                    <small>ì‘ì„±ì: {{ review.reviewer.username }}</small>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-muted">ì•„ì§ ë°›ì€ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
    <h2 class="mt-5">ë‚˜ì˜ í™œë™ ì´ë ¥ (TODO)</h2>
    <p>ì—¬ê¸°ì— ë‚´ê°€ ë“±ë¡í•˜ê±°ë‚˜ ì§€ì›í•œ ì‹¬ë¶€ë¦„ ëª©ë¡ì´ í‘œì‹œë  ì˜ˆì •ì…ë‹ˆë‹¤.</p>

{% endblock %}